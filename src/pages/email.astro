---
import BreadCrumbs from "../components/BreadCrumbs.astro";
import CategoryButton from "../components/CategoryButton.astro";
import "@fontsource-variable/inter-tight";
import LayoutMain from "../layouts/LayoutMain.astro";

{
  Astro.props;
}
---

<LayoutMain title="email">
  <div class="w-full">
    <BreadCrumbs />
    <h1 class="pt-10 text-5xl leading-normal font-bold">
      üèØ Explore Japan's laid-back side
    </h1>
    <p class="pt-5 text-xl leading-normal">
      <b>Sent on:</b> 2024-01-02 06:02:06 UTC
    </p>
    <CategoryButton>Button</CategoryButton>
    <div
      class="bg-white dark:bg-inherit rounded-lg shadow-md mt-10 w-3/4 p-4 animate-pulse"
      id="skeletonLoading"
    >
      <div class="w-2/3 h-12 bg-gray-500 rounded mb-8"></div>
      <div class="w-full h-8 bg-gray-500 rounded mb-2"></div>
      <div class="w-full h-8 bg-gray-500 rounded mb-2"></div>
      <div class="w-2/2 h-8 bg-gray-500 rounded mb-2"></div>
      <div class="w-3/5 h-8 bg-gray-500 rounded mb-2"></div>
      <div
        role="status"
        class="flex items-center justify-center h-56 max-w-sm bg-gray-500 rounded-lg animate-pulse dark:bg-gray-500 mb-2"
      >
        <svg
          class="w-10 h-10 text-gray-200 dark:text-gray-600"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 16 20"
        >
          <path
            d="M5 5V.13a2.96 2.96 0 0 0-1.293.749L.879 3.707A2.98 2.98 0 0 0 .13 5H5Z"
          ></path>
          <path
            d="M14.066 0H7v5a2 2 0 0 1-2 2H0v11a1.97 1.97 0 0 0 1.934 2h12.132A1.97 1.97 0 0 0 16 18V2a1.97 1.97 0 0 0-1.934-2ZM9 13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v2Zm4 .382a1 1 0 0 1-1.447.894L10 13v-2l1.553-1.276a1 1 0 0 1 1.447.894v2.764Z"
          ></path>
        </svg>
        <span class="sr-only">Loading...</span>
      </div>
      <div class="w-2/3 h-8 bg-gray-500 rounded mb-2"></div>
      <div class="w-full h-8 bg-gray-500 rounded mb-2"></div>
      <div class="w-2/3 h-8 bg-gray-500 rounded mb-2"></div>
      <div class="w-1/2 h-8 bg-gray-500 rounded mb-2"></div>
      <div class="w-full h-8 bg-gray-500 rounded mb-2"></div>
      <div class="w-1/2 h-8 bg-gray-500 rounded mb-2"></div>
    </div>
    <!-- Actual Content -->
    <div id="actualContent" class="flex-1">
      <iframe
        width="100%"
        src="archives/Finding_cheap_flights_just_got_easier.html"
        id="mail"
        onload="resizeIframe()"></iframe>
    </div>

    <script>
      function resizeIframe() {
        var iframe = document.getElementById("mail") as HTMLIFrameElement;
        if (iframe && iframe.contentWindow) {
          iframe.style.height =
            iframe.contentWindow.document.body.clientHeight + 1 + "px";
        }
      }

      document.addEventListener("DOMContentLoaded", function () {
        var iframe = document.getElementById("mail") as HTMLIFrameElement;

        if (iframe && iframe.contentWindow) {
          iframe.onload = function () {
            resizeIframe();

            // Hide skeleton loading
            var skeletonLoading = document.getElementById("skeletonLoading");
            if (skeletonLoading) {
              skeletonLoading.style.display = "none";
            }

            // Show actual content
            var actualContent = document.getElementById("actualContent");
            if (actualContent) {
              actualContent.style.display = "inline-block, rounded-xl";
            }
          };
        }
      });
    </script>
  </div>
</LayoutMain>
